<% if local_assigns[:view_mode] == 'list' %>
  <!-- List View -->
  <div class="flex items-center justify-between p-4 border-b border-gray-700 hover:bg-gray-700/50"
       data-controller="music--song-eq-indicator"
       data-music--song-eq-indicator-song-url-value="<%= url_for(song.audio_file) if song.audio_file.attached? %>">
    <div class="flex items-center space-x-4">
      <%= image_tag song.image, class: "w-12 h-12 rounded-sm", alt: song.title if song.image.attached? %>
      <div class="min-w-0 flex-1">
        <div class="flex items-center gap-2">
          <p class="text-sm font-medium text-white truncate"><%= song.title %></p>
          <!-- EQ Indicator Icon -->
          <span data-music--song-eq-indicator-target="indicator"
                class="hidden text-teal-400"
                title="Custom EQ">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"/>
            </svg>
          </span>
        </div>
        <p class="text-xs text-gray-400 truncate"><%= song.artist %></p>
        <p class="text-xs text-gray-500 truncate"><%= song.album %></p>
      </div>
    </div>
    <%= render partial: "zuke/partial/play", locals: { controller_name: "music--song", song: song } if song.audio_file.attached? %>
  </div>
<% else %>
  <!-- Card View -->
  <div class="max-w-sm bg-white border border-gray-200 rounded-lg shadow-xs dark:bg-gray-800 dark:border-gray-700 m-1 w-48"
       data-controller="music--song-eq-indicator"
       data-music--song-eq-indicator-song-url-value="<%= url_for(song.audio_file) if song.audio_file.attached? %>">
    <a href="#">
      <%= image_tag song.image, class: "rounded-t-lg w-48", alt: song.title if song.image.attached? %>
    </a>
    <div class="flex justify-between item-center p-2">
      <a href="#" class="flex text-sm font-normal tracking-tight text-gray-400 items-center gap-1">
        <%= song.title %>
        <!-- EQ Indicator Icon -->
        <span data-music--song-eq-indicator-target="indicator"
              class="hidden text-teal-400"
              title="Custom EQ">
          <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"/>
          </svg>
        </span>
      </a>
      <%= render partial: "zuke/partial/play", locals: { controller_name: "music--song", song: song } if song.audio_file.attached? %>
    </div>
  </div>
<% end %>
<div class="relative"
     data-controller="music--settings-menu">

  <!-- Settings Trigger Button (Three Dots) -->
  <button data-action="click->music--settings-menu#toggleMenu"
          data-music--settings-menu-target="trigger"
          class="relative z-50 text-white bg-black/50 hover:bg-black/70 p-2 rounded-full transition-colors"
          aria-label="Settings Menu"
          type="button">
    <!-- Three Vertical Dots Icon -->
    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 12c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
    </svg>
  </button>

  <!-- Dropdown Menu -->
  <div data-music--settings-menu-target="menu"
       data-action="click->music--settings-menu#preventClose"
       class="hidden absolute top-full right-0 mt-2 bg-black/95 backdrop-blur-sm rounded-lg shadow-xl border border-gray-600 w-72 sm:w-80 z-50">

    <div class="py-2">
      <!-- Settings Header -->
      <div class="px-4 py-2 border-b border-gray-700">
        <h3 class="text-white font-semibold text-sm">Settings</h3>
      </div>

      <!-- Toggle Settings -->
      <div class="px-4 py-3 space-y-3">

        <!-- Auto Advance Toggle -->
        <div class="flex items-center justify-between">
          <label class="text-white text-sm flex items-center gap-2">
            <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
            </svg>
            Auto Advance
          </label>
          <%= render "zuke/components/player/settings_menu/auto_advance_toggle" %>
        </div>

        <!-- Play on Load Toggle -->
        <div class="flex items-center justify-between">
          <label class="text-white text-sm flex items-center gap-2">
            <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path fill-rule="evenodd" d="M20.337 3.664c.213.212.354.486.404.782.294 1.711.657 5.195-.906 6.76-1.77 1.768-8.485 5.517-10.611 6.683a.987.987 0 0 1-1.176-.173l-.882-.88-.877-.884a.988.988 0 0 1-.173-1.177c1.165-2.126 4.913-8.841 6.682-10.611 1.562-1.563 5.046-1.198 6.757-.904.296.05.57.191.782.404ZM5.407 7.576l4-.341-2.69 4.48-2.857-.334a.996.996 0 0 1-.565-1.694l2.112-2.111Zm11.357 7.02-.34 4-2.111 2.113a.996.996 0 0 1-1.69-.565l-.422-2.807 4.563-2.74Zm.84-6.21a1.99 1.99 0 1 1-3.98 0 1.99 1.99 0 0 1 3.98 0Z" clip-rule="evenodd"/>
            </svg>
            Play on Load
          </label>
          <%= render "zuke/components/player/settings_menu/play_on_load_toggle" %>
        </div>

      </div>

      <!-- Navigation Links -->
      <div class="border-t border-gray-700">

        <!-- Admin Sign In Link -->
        <%= link_to new_milk_admin_session_path,
                    class: "flex items-center gap-3 px-4 py-3 text-gray-300 hover:text-white hover:bg-gray-800 transition-colors" do %>
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" d="M12 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8Zm-2 9a4 4 0 0 0-4 4v1a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-1a4 4 0 0 0-4-4h-4Z" clip-rule="evenodd"/>
          </svg>
          <span class="text-sm">Admin Sign In</span>
        <% end %>

        <!-- About Link -->
        <%= link_to root_path,
                    class: "flex items-center gap-3 px-4 py-3 text-gray-300 hover:text-white hover:bg-gray-800 transition-colors rounded-b-lg" do %>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          <span class="text-sm">About</span>
        <% end %>

      </div>
    </div>
  </div>
</div>

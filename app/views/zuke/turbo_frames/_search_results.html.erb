<%= turbo_frame_tag "music-frame" do %>
  <!-- Search Bar -->
  <%= render "zuke/components/search_bar" %>

  <div class="w-full flex flex-col text-gray-100">

    <!-- Search Results Header -->
    <div class="mx-4 py-2">
      <h2 class="kanit font-medium">Search Results</h2>
      <p class="text-sm text-gray-400">
        <%= @songs_for_display.count + @artists.count + @albums.count %> results found
      </p>
    </div>
    <hr class="mb-4 mx-4">

    <!-- Songs Section -->
    <% if @songs_for_display.any? %>
      <div class="mb-6">
        <h3 class="kanit font-medium text-lg mx-4 mb-3 flex items-center gap-2">
          <svg class="w-5 h-5 text-lime-400" fill="currentColor" viewBox="0 0 24 24">
            <path d="M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"></path>
          </svg>
          Songs (<%= @songs_for_display.count %>)
        </h3>
        <div data-controller="music--song-list"
             data-music--song-list-songs-value="<%= @songs_data %>"
             class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 sm:gap-4 px-4">
          <% @songs_for_display.each do |song| %>
            <div class="flex justify-center">
              <%= render partial: "zuke/components/smart-image", locals: { song: song } %>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>

    <!-- Artists Section -->
    <% if @artists.any? %>
      <div class="mb-6">
        <h3 class="kanit font-medium text-lg mx-4 mb-3 flex items-center gap-2">
          <svg class="w-5 h-5 text-lime-400" fill="currentColor" viewBox="0 0 24 24">
            <path fill-rule="evenodd" d="M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.437.695A18.683 18.683 0 0112 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 01-.437-.695z" clip-rule="evenodd"/>
          </svg>
          Artists (<%= @artists.count %>)
        </h3>
        <div class="px-4 space-y-2">
          <% @artists.each do |artist| %>
            <div class="bg-gray-800/50 rounded-lg p-3 hover:bg-gray-800 transition-colors">
              <div class="flex items-center justify-between">
                <div>
                  <h4 class="font-medium text-white"><%= artist.name %></h4>
                  <p class="text-sm text-gray-400"><%= pluralize(artist.songs.count, 'song') %></p>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>

    <!-- Albums Section -->
    <% if @albums.any? %>
      <div class="mb-6">
        <h3 class="kanit font-medium text-lg mx-4 mb-3 flex items-center gap-2">
          <svg class="w-5 h-5 text-lime-400" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 14.5c-2.49 0-4.5-2.01-4.5-4.5S9.51 7.5 12 7.5s4.5 2.01 4.5 4.5-2.01 4.5-4.5 4.5zm0-5.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"/>
          </svg>
          Albums (<%= @albums.count %>)
        </h3>
        <div class="px-4 space-y-2">
          <% @albums.each do |album| %>
            <div class="bg-gray-800/50 rounded-lg p-3 hover:bg-gray-800 transition-colors">
              <div class="flex items-center justify-between">
                <div>
                  <h4 class="font-medium text-white"><%= album.title %></h4>
                  <p class="text-sm text-gray-400"><%= album.artist.name %> â€¢ <%= pluralize(album.songs.count, 'song') %></p>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>

    <!-- No Results Message -->
    <% if @songs_for_display.empty? && @artists.empty? && @albums.empty? %>
      <div class="text-center py-12 px-4">
        <svg class="w-16 h-16 mx-auto text-gray-600 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <h3 class="text-xl font-medium text-gray-400 mb-2">No results found for "<%= @query %>"</h3>
        <p class="text-gray-500">Try searching for something else</p>
      </div>
    <% end %>

  </div>
<% end %>
